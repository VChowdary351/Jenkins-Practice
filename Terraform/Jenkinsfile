pipeline{
    agent any
    options {
        ansiColor('xterm')
        // timeout(time: 1, unit: 'HOURS')
        // disableConcurrentBuilds()
    }

    stages{
        stage('Init'){
            steps{
                 withAWS(credentials: 'aws-creds', region: 'us-east-1') {
                sh'''
                    cd Terraform
                    ls -ltr
                    pwd
                    terraform init
                '''
                 }
            }
        }
        
        stage('plan'){
            steps{
                sh'''
                    cd Terraformd
                    ls -ltr
                    pwd
                    terraform plan
                '''
            }
        }
    }
    post{
        always{
            echo 'i will always run whether job is success or not'
        }
        success{
            echo 'i will run only when job is success'
        }
        failure{
            echo 'i will run when is failed '
        }
    }

}